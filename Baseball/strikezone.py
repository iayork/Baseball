"""
Functions for calculating and analyzing the strike zone


def get_50pct_zone(self, year=2015):
    Outside the points the chance of a ball vs. a called strike is > 50%
    50% strike zone (zone outside of which there is >50% chance a pitch 
    will be called a ball vs. a strike)


class Strikezone(object)

class Zone(Strikezone):
    def __init__(self, df, x_num, y_num): 
    def getxy(self, x_num, y_num):
    def get_pitches(self, df): 
    def get_hits_in_zone(self, df):
    def get_center_point(self):
    def get_color(self, clrs): 
    def get_annot(self): 
    
    


"""


class Strikezone(object):
    """
    class Strikezone(object):
        def __init__(self):
        def official_zone(self):
        def get_x_list(self):
        def get_y_list(self):
        def get_std_zone(self): 
        def get_new_zone(self):

    """
    def __init__(self):
        pass
        
    def official_zone(self):
        self.sz_left = -1.66/2
        self.sz_right = 1.66/2
        self.x_step = (self.sz_right - self.sz_left)/3.0
        self.leftmost = (self.sz_left - self.x_step)
        self.rightmost = (self.sz_right + self.x_step)
        
        self.sz_bottom = 1.58
        self.sz_top = 3.4
        self.y_step = (self.sz_top - self.sz_bottom)/3.0
        self.bottommost = (self.sz_bottom - self.y_step)
        self.topmost = (self.sz_top + self.y_step)
    
    def get_x_list(self):
        return [self.leftmost + (i * self.x_step) for i in range(5)]
    
    def get_y_list(self):
        return [self.bottommost + (i * self.y_step) for i in range(5)]
    
    def get_std_zone(self): 
        self.official_zone()    
        szx = [self.sz_left, self.sz_left, self.sz_right, self.sz_right, self.sz_left]
        szy = [3.4, 1.75, 1.75, 3.4, 3.4]
        return {'szx':szx, 'szy':szy} 
               
        
        
class Zone(Strikezone):
    """ 
    class Zone(Strikezone):
        def __init__(self, df, x_num, y_num): 
        def getxy(self, x_num, y_num):
        def get_pitches(self, df): 
        def get_hits_in_zone(self, df):
        def get_center_point(self):
        def get_color(self, clrs): 
        def get_annot(self): 
    """
    def __init__(self, df, x_num, y_num): 
        
        Strikezone.__init__(self)
        self.getxy(x_num, y_num) 
        self.get_hits_in_zone(df)
        
        self.x_list = self.get_x_list()
        self.y_list = self.get_y_list()
        
    def getxy(self, x_num, y_num):
        self.x = self.x_list[x_num]
        self.y = self.y_list[y_num]
        
    def get_pitches(self, df): 
        
        pitches_in_zoneDF = df[(df['px'] >= self.x) & 
                               (df['px'] < self.x + self.x_step) &
                               (df['pz'] >= self.y) &
                               (df['pz'] < self.y + self.y_step) ]
        
        self.pitches_in_zone_pct = len(pitches_in_zoneDF)/len(df) * 100.0
        return (pitches_in_zoneDF)
        
    def get_hits_in_zone(self, df):
        hit_des = ['In play, no out','In play, run(s)']
        pitches_in_zoneDF = self.get_pitches(df)
        hits_in_zoneDF = pitches_in_zoneDF[pitches_in_zoneDF['des'].isin(hit_des)]
        try:
            self.hits_pct = len(hits_in_zoneDF)/len(pitches_in_zoneDF) * 100.0 
        except ZeroDivisionError:
            self.hits_pct = 0
        
    def get_center_point(self):
        x_point = self.x + (self.x_step/2.0)
        y_point = self.y + (self.y_step/2.0)
        return(x_point, y_point)
        
    def get_color(self, clrs): 
        try:
            clr = clrs[floor(self.hits_pct/2)]
        except IndexError:
            clr = clrs[-1]
        return(clr) 
    
    def get_annot(self):
        txt = "%.1f%% (%.1f%%)" % (self.pitches_in_zone_pct, self.hits_pct) 
        txt_x = self.x + self.x_step * 0.2
        txt_y = self.y + self.y_step * 0.8
        return ((txt, txt_x, txt_y))



def get_50pct_zone(year=2015):
    """
     Outside the points the chance of a ball vs. a called strike is > 50%
    
    50% strike zone (zone outside of which there is >50% chance a pitch 
    will be called a ball vs. a strike)
    """

    k_zoneL_2008 = [(-1.0, 1.75), (-1.125, 1.875), (-1.125, 2.0), (-1.25, 2.125), (-1.25, 2.25), (-1.25, 2.375), (-1.25, 2.5), 
                    (-1.25, 2.625), (-1.25, 2.75), (-1.125, 2.875), (-1.125, 3.0), (-1.0, 3.125), (-0.75, 3.25), (0.5, 3.25), 
                    (0.625, 3.125), (0.75, 3.0), (0.75, 2.875), (0.875, 2.75), (0.875, 2.625), (0.875, 2.5), (0.875, 2.375), 
                    (0.875, 2.25), (0.75, 2.125), (0.75, 2.0), (0.625, 1.875), (0.375, 1.75), (-1.0, 1.75)]
    k_zoneR_2008 = [(-0.625, 1.75), (-0.875, 1.875), (-1.0, 2.0), (-1.0, 2.125), (-1.0, 2.25), (-1.0, 2.375), (-1.0, 2.5), 
                    (-1.0, 2.625), (-1.0, 2.75), (-1.0, 2.875), (-1.0, 3.0), (-0.875, 3.125), (-0.75, 3.25), (-0.5, 3.375), 
                    (0.625, 3.25), (0.875, 3.125), (0.875, 3.0), (1.0, 2.875), (1.0, 2.75), (1.0, 2.625), (1.0, 2.5), 
                    (1.0, 2.375), (1.0, 2.25), (1.0, 2.125), (1.0, 2.0), (0.875, 1.875), (0.75, 1.75), (-0.625, 1.75)]


    k_zoneL_2009 = [(-1.0, 1.75), (-1.125, 1.875), (-1.25, 2.0), (-1.25, 2.125), (-1.25, 2.25), (-1.25, 2.375), (-1.25, 2.5), 
                    (-1.25, 2.625), (-1.25, 2.75), (-1.125, 2.875), (-1.125, 3.0), (-1.0, 3.125), (-0.875, 3.25), (0.5, 3.25), 
                    (0.625, 3.125), (0.75, 3.0), (0.75, 2.875), (0.875, 2.75), (0.875, 2.625), (0.875, 2.5), (0.75, 2.375), 
                    (0.75, 2.25), (0.75, 2.125), (0.625, 2.0), (0.625, 1.875), (0.375, 1.75), (-1.0, 1.75)]

    k_zoneR_2009 = [(-0.625, 1.75), (-0.875, 1.875), (-1.0, 2.0), (-1.0, 2.125), (-1.0, 2.25), (-1.0, 2.375), (-1.0, 2.5), 
                    (-1.0, 2.625), (-1.0, 2.75), (-1.0, 2.875), (-1.0, 3.0), (-0.875, 3.125), (-0.75, 3.25), (-0.25, 3.375), 
                    (0.625, 3.25), (0.75, 3.125), (0.875, 3.0), (1.0, 2.875), (1.0, 2.75), (1.0, 2.625), (1.0, 2.5), 
                    (1.0, 2.375), (1.0, 2.25), (1.0, 2.125), (0.875, 2.0), (0.875, 1.875), (0.625, 1.75), (-0.625, 1.75)]

    k_zoneL_2010 = [(-1.0, 1.75), (-1.125, 1.875), (-1.125, 2.0), (-1.25, 2.125), (-1.25, 2.25), (-1.25, 2.375), (-1.25, 2.5), 
                    (-1.25, 2.625), (-1.125, 2.75), (-1.125, 2.875), (-1.0, 3.0), (-1.0, 3.125), (-0.75, 3.25), (-0.125, 3.375), 
                    (0.5, 3.25), (0.625, 3.125), (0.75, 3.0), (0.75, 2.875), (0.75, 2.75), (0.75, 2.625), (0.75, 2.5), 
                    (0.75, 2.375), (0.75, 2.25), (0.75, 2.125), (0.75, 2.0), (0.625, 1.875), (0.375, 1.75), (-1.0, 1.75)]

    k_zoneR_2010 = [(-0.625, 1.75), (-0.875, 1.875), (-1.0, 2.0), (-1.0, 2.125), (-1.0, 2.25), (-1.0, 2.375), (-1.0, 2.5), 
                    (-1.0, 2.625), (-1.0, 2.75), (-1.0, 2.875), (-0.875, 3.0), (-0.875, 3.125), (-0.625, 3.25), (0.625, 3.25), 
                    (0.875, 3.125), (0.875, 3.0), (1.0, 2.875), (1.0, 2.75), (1.0, 2.625), (1.0, 2.5), (1.0, 2.375), 
                    (1.0, 2.25), (1.0, 2.125), (1.0, 2.0), (0.875, 1.875), (0.75, 1.75), (-0.625, 1.75)]


    k_zoneL_2011 = [(-0.875, 1.625), (-1.0, 1.75), (-1.125, 1.875), (-1.125, 2.0), (-1.125, 2.125), (-1.25, 2.25), 
                    (-1.25, 2.375), (-1.125, 2.5), (-1.125, 2.625), (-1.125, 2.75), (-1.125, 2.875), (-1.125, 3.0), 
                    (-1.0, 3.125), (-0.875, 3.25), (-0.5, 3.375), (0.25, 3.375), (0.625, 3.25), (0.625, 3.125), (0.75, 3.0), 
                    (0.75, 2.875), (0.75, 2.75), (0.875, 2.625), (0.875, 2.5), (0.875, 2.375), (0.875, 2.25), (0.75, 2.125), 
                    (0.75, 2.0), (0.625, 1.875), (0.5, 1.75), (-0.875, 1.625)]

    k_zoneR_2011 = [(-0.25, 1.625), (-0.75, 1.75), (-0.875, 1.875), (-1.0, 2.0), (-1.0, 2.125), (-1.0, 2.25), (-1.0, 2.375), 
                    (-1.0, 2.5), (-1.0, 2.625), (-1.0, 2.75), (-1.0, 2.875), (-1.0, 3.0), (-0.875, 3.125), (-0.75, 3.25), 
                    (-0.5, 3.375), (0.25, 3.375), (0.625, 3.25), (0.75, 3.125), (0.875, 3.0), (1.0, 2.875), (1.0, 2.75), 
                    (1.0, 2.625), (1.0, 2.5), (1.0, 2.375), (1.0, 2.25), (1.0, 2.125), (0.875, 2.0), (0.875, 1.875), 
                    (0.75, 1.75), (0.5, 1.625), (-0.25, 1.625)]

    k_zoneL_2012 = [(-1.0, 1.625), (-1.125, 1.75), (-1.125, 1.875), (-1.125, 2.0), (-1.25, 2.125), (-1.25, 2.25), 
                    (-1.25, 2.375), (-1.125, 2.5), (-1.125, 2.625), (-1.125, 2.75), (-1.125, 2.875), (-1.0, 3.0), 
                    (-0.875, 3.125), (-0.75, 3.25), (0.125, 3.375), (0.5, 3.25), (0.625, 3.125), (0.75, 3.0), 
                    (0.75, 2.875), (0.75, 2.75), (0.75, 2.625), (0.875, 2.5), (0.875, 2.375), (0.75, 2.25), (0.75, 2.125), 
                    (0.75, 2.0), (0.75, 1.875), (0.625, 1.75), (0.25, 1.625), (-1.0, 1.625)]

    k_zoneR_2012 = [(-0.625, 1.625), (-0.875, 1.75), (-1.0, 1.875), (-1.0, 2.0), (-1.0, 2.125), (-1.0, 2.25), (-1.0, 2.375), 
                    (-1.0, 2.5), (-1.0, 2.625), (-1.0, 2.75), (-1.0, 2.875), (-0.875, 3.0), (-0.875, 3.125), (-0.75, 3.25), 
                    (-0.375, 3.375), (0.625, 3.25), (0.75, 3.125), (0.875, 3.0), (0.875, 2.875), (1.0, 2.75), (1.0, 2.625), 
                    (1.0, 2.5), (1.0, 2.375), (1.0, 2.25), (1.0, 2.125), (1.0, 2.0), (0.875, 1.875), (0.875, 1.75), 
                    (0.625, 1.625), (-0.625, 1.625)]

    k_zoneL_2013 = [(-0.375, 1.5), (-1.0, 1.625), (-1.125, 1.75), (-1.125, 1.875), (-1.125, 2.0), (-1.125, 2.125), 
                    (-1.125, 2.25), (-1.125, 2.375), (-1.125, 2.5), (-1.125, 2.625), (-1.0, 2.75), (-1.0, 2.875), 
                    (-1.0, 3.0), (-0.875, 3.125), (-0.75, 3.25), (-0.25, 3.375), (0.125, 3.375), (0.5, 3.25), 
                    (0.75, 3.125), (0.75, 3.0), (0.75, 2.875), (0.75, 2.75), (0.75, 2.625), (0.875, 2.5), (0.875, 2.375), (0.875, 2.25), (0.75, 2.125), (0.75, 2.0), (0.75, 1.875), (0.625, 1.75), (0.375, 1.625), (-0.375, 1.5)]

    k_zoneR_2013 = [(-0.625, 1.625), (-0.875, 1.75), (-1.0, 1.875), (-1.0, 2.0), (-1.0, 2.125), (-1.0, 2.25), 
                    (-1.0, 2.375), (-1.0, 2.5), (-1.0, 2.625), (-1.0, 2.75), (-1.0, 2.875), (-1.0, 3.0), (-0.875, 3.125), 
                    (-0.75, 3.25), (-0.375, 3.375), (0.625, 3.25), (0.75, 3.125), (0.875, 3.0), (0.875, 2.875), (1.0, 2.75), 
                    (1.0, 2.625), (1.0, 2.5), (1.0, 2.375), (1.0, 2.25), (1.0, 2.125), (1.0, 2.0), (0.875, 1.875), 
                    (0.875, 1.75), (0.75, 1.625), (-0.625, 1.625)]

    k_zoneL_2014 = [(-0.875, 1.5), (-1.0, 1.625), (-1.0, 1.75), (-1.125, 1.875), (-1.125, 2.0), (-1.125, 2.125), 
                   (-1.125, 2.25), (-1.125, 2.375), (-1.125, 2.5), (-1.125, 2.625), (-1.125, 2.75), (-1.0, 2.875), 
                   (-1.0, 3.0), (-0.875, 3.125), (-0.75, 3.25), (-0.125, 3.375), (0.5, 3.25), (0.625, 3.125), 
                   (0.75, 3.0), (0.75, 2.875), (0.75, 2.75), (0.75, 2.625), (0.75, 2.5), (0.75, 2.375), (0.75, 2.25), 
                   (0.75, 2.125), (0.75, 2.0), (0.75, 1.875), (0.625, 1.75), (0.5, 1.625), (0.25, 1.5), (-0.875, 1.5), 
                   (-0.875, 1.5), (-0.875, 1.5)]

    k_zoneR_2014 = [(-0.375, 1.5), (-0.875, 1.625), (-0.875, 1.75), (-1.0, 1.875), (-1.0, 2.0), (-1.0, 2.125), 
                   (-1.0, 2.25), (-1.0, 2.375), (-1.0, 2.5), (-1.0, 2.625), (-1.0, 2.75), (-1.0, 2.875), (-0.875, 3.0), 
                   (-0.875, 3.125), (-0.75, 3.25), (-0.375, 3.375), (0.5, 3.25), (0.75, 3.125), (0.875, 3.0), 
                   (0.875, 2.875), (0.875, 2.75), (1.0, 2.625), (1.0, 2.5), (1.0, 2.375), (1.0, 2.25), (1.0, 2.125), 
                   (1.0, 2.0), (0.875, 1.875), (0.875, 1.75), (0.75, 1.625), (0.625, 1.5), (-0.375, 1.5)]

    k_zoneL_2015 = [(-0.875,1.5), (-1.0,  1.6), (-1.1, 1.875), (-1.05, 2.75), (-1.0,   3.0), (-0.86, 3.28), 
                    (-0.115,3.45), (0.55,3.3), (0.75,3.0),  (0.8,2.875), (0.8,2.125), (0.75,2.0), (0.625,1.75), 
                    (0.5,1.625), (0.25,1.5), (-0.25,1.45), (-0.875, 1.5)]

    k_zoneR_2015 = [(-0.375,1.5), (-0.875, 1.625), (-.975, 1.875), (-1.0, 2.175), (-.975, 2.875), (-0.87, 3.125), 
                    (-0.75, 3.325), (-0.375,3.45), (0.5, 3.375), (0.825, 3.175), (.97, 2.875), (.97, 2.75), 
                    (.97, 2.625), (.97, 2.5), (.97, 2.375), (.97, 2.25), (.97, 2.125), (.97, 2.0), (0.9, 1.75), 
                    (0.6, 1.5), (-0.375, 1.5)]

    zoneD = {2008:(k_zoneL_2008, k_zoneR_2008),
             2009:(k_zoneL_2009, k_zoneR_2009),
             2010:(k_zoneL_2010, k_zoneR_2010),
             2011:(k_zoneL_2011, k_zoneR_2011),
             2012:(k_zoneL_2012, k_zoneR_2012),
             2013:(k_zoneL_2013, k_zoneR_2013),
             2014:(k_zoneL_2014, k_zoneR_2014), 
             2015:(k_zoneL_2015, k_zoneR_2015)}

    
    (k_zoneL, k_zoneR) = zoneD[year]
    return {'xLs': [x[0] for x in k_zoneL],
            'yLs': [x[1] for x in k_zoneL],
            'xRs': [x[0] for x in k_zoneR],
            'yRs': [x[1] for x in k_zoneR]} 


 